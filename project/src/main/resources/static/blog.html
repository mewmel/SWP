<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MEDITAB - Nền tảng Blog Y tế</title>
    <link rel="stylesheet" href="css/doctor-common.css">
    <link rel="stylesheet" href="css/blog.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header Navigation -->
    <header class="doctor-header">
        <div class="doctor-header-container">
            <nav class="doctor-nav">
                <a href="bac-si-dashboard.html" class="nav-link">Trang cá nhân</a>
                <a href="blog.html" class="nav-link active">Đăng Blog</a>
                <a href="bac-si-lich-lam-viec.html" class="nav-link">Xem lịch làm</a>
                <a href="bac-si-profile.html" class="nav-link">Hồ sơ cá nhân</a>
            </nav>
            
            <div class="doctor-header-right">
                <div class="notification-wrapper" style="position: relative;">
                    <button class="doctor-notification-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                        </svg>
                        <span class="doctor-notification-badge">3</span>
                    </button>
                </div>
                
                <div class="doctor-profile-info">
                    <div class="doctor-info">
                        <div class="doctor-name">BS. Nguyễn Ngọc Khánh Linh</div>
                        <div class="doctor-role">Quản trị viên</div>
                    </div>
                    <div class="doctor-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                </div>

                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
                
                <button class="doctor-mobile-menu">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </div>
    </header>



    <!-- Main Content -->
    <div class="doctor-page-container">
        <div class="container">
            <div class="blog-layout">
                <main class="main-content">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="page-header-content">
                        <div class="page-title-section">
                            <h1><i class="fas fa-pen-fancy"></i> Tạo bài viết mới</h1>
                            <p>Chia sẻ kiến thức và kinh nghiệm y tế với cộng đồng</p>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-outline" id="saveDraftBtn">
                                <i class="fas fa-save"></i> Lưu nháp
                            </button>
                            <button class="btn btn-secondary" id="previewBtn">
                                <i class="fas fa-eye"></i> <span id="previewText">Xem trước</span>
                            </button>
                            <button class="btn btn-primary" id="publishBtn">
                                <i class="fas fa-paper-plane"></i> Xuất bản
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Blog Editor -->
                <div class="blog-editor-container">
                    <div class="blog-editor">

                        <!-- Post Metadata -->
                        <div class="post-metadata">
                            <div class="metadata-grid">
                                <div class="metadata-item">
                                    <label for="postTitle" class="form-label">
                                        <i class="fas fa-heading"></i> Tiêu đề bài viết
                                    </label>
                                    <input type="text" id="postTitle" class="form-input title-input" placeholder="Nhập tiêu đề hấp dẫn cho bài viết...">
                                </div>
                                <div class="metadata-item">
                                    <label for="categorySelect" class="form-label">
                                        <i class="fas fa-tags"></i> Chuyên khoa
                                    </label>
                                    <select id="categorySelect" class="form-select">
                                        <option value="">Chọn chuyên khoa</option>
                                        <option value="IVF">Thụ tinh ống nghiệm - IVF</option>
                                        <option value="IUI">Truyền tinh trùng - IUI</option>
                                        <option value="hiem-muon">Điều trị hiếm muộn</option>
                                        <option value="phu-khoa">Phụ khoa tổng quát</option>
                                        <option value="thai-san">Thai sản</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="tag-section">
                                <label class="form-label">
                                    <i class="fas fa-hashtag"></i> Thẻ tag
                                </label>
                                <div class="tag-input-group">
                                    <input type="text" id="tagInput" class="form-input" placeholder="Thêm tag (Enter để thêm)...">
                                    <button class="btn btn-primary btn-sm" id="addTagBtn">
                                        <i class="fas fa-plus"></i> Thêm
                                    </button>
                                </div>
                                <div class="tags-container" id="tagsContainer"></div>
                            </div>
                        </div>

                        <!-- Content Editor -->
                        <div class="editor-content">
                            <div class="editor-main">

                            <div class="editor-section" id="editorSection">
                                <div class="editor-header">
                                    <h3><i class="fas fa-edit"></i> Nội dung bài viết</h3>
                                    <div class="editor-tools">
                                        <div class="word-count" id="wordCount">0 từ</div>
                                        <button class="btn btn-sm btn-outline" id="fullscreenBtn">
                                            <i class="fas fa-expand"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="toolbar">
                                    <div class="toolbar-group">
                                        <button class="toolbar-btn" data-command="bold" title="Đậm (Ctrl+B)">
                                            <i class="fas fa-bold"></i>
                                        </button>
                                        <button class="toolbar-btn" data-command="italic" title="Nghiêng (Ctrl+I)">
                                            <i class="fas fa-italic"></i>
                                        </button>
                                        <button class="toolbar-btn" data-command="underline" title="Gạch chân (Ctrl+U)">
                                            <i class="fas fa-underline"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-divider"></div>
                                    
                                    <div class="toolbar-group">
                                        <button class="toolbar-btn" data-command="insertUnorderedList" title="Danh sách">
                                            <i class="fas fa-list-ul"></i>
                                        </button>
                                        <button class="toolbar-btn" data-command="insertOrderedList" title="Danh sách số">
                                            <i class="fas fa-list-ol"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-divider"></div>
                                    
                                    <div class="toolbar-group">
                                        <button class="toolbar-btn" onclick="insertLink()" title="Thêm liên kết">
                                            <i class="fas fa-link"></i>
                                        </button>
                                        <button class="toolbar-btn" onclick="insertImage()" title="Thêm hình ảnh">
                                            <i class="fas fa-image"></i>
                                        </button>
                                        <button class="toolbar-btn" data-command="insertHorizontalRule" title="Đường kẻ ngang">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                    </div>
                                    
                                    <div class="toolbar-divider"></div>
                                    
                                    <div class="toolbar-group">
                                        <select class="toolbar-select" onchange="formatText(this.value)">
                                            <option value="">Định dạng</option>
                                            <option value="h1">Tiêu đề 1</option>
                                            <option value="h2">Tiêu đề 2</option>
                                            <option value="h3">Tiêu đề 3</option>
                                            <option value="p">Đoạn văn</option>
                                            <option value="blockquote">Trích dẫn</option>
                                        </select>
                                        <button class="toolbar-btn" onclick="insertCode()" title="Code">
                                            <i class="fas fa-code"></i>
                                        </button>
                                    </div>
                                </div>
                                
                                <div class="content-editor" id="contentEditor" contenteditable="true" placeholder="Bắt đầu viết nội dung bài viết của bạn...

Mẹo: Sử dụng các tiêu đề để tổ chức nội dung, thêm hình ảnh minh họa và chia sẻ kinh nghiệm thực tế."></div>
                            </div>

                            <!-- Preview Section -->
                            <div class="preview-section" id="previewSection" style="display: none;">
                                <div class="preview-header">
                                    <h3><i class="fas fa-eye"></i> Xem trước bài viết</h3>
                                    <div class="preview-meta">
                                        <span class="author-info">
                                            <i class="fas fa-user-md"></i> BS. Nguyễn Ngọc Khánh Linh
                                        </span>
                                        <span class="publish-date">
                                            <i class="fas fa-calendar"></i> <span id="currentDate"></span>
                                        </span>
                                    </div>
                                </div>
                                <div class="preview-container">
                                    <h1 class="preview-title" id="previewTitle">Tiêu đề bài viết</h1>
                                    <div class="preview-tags" id="previewTags"></div>
                                    <div class="preview-content" id="previewContent">
                                        <p>Nội dung bài viết sẽ hiển thị ở đây...</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Status Bar -->
                            <div class="status-bar">
                                <div class="status-left">
                                    <div class="status-indicator">
                                        <div class="status-dot" id="statusDot"></div>
                                        <span class="status-text" id="statusText">Bản nháp</span>
                                    </div>
                                    <div class="auto-save" id="autoSave">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Đã lưu tự động</span>
                                    </div>
                                </div>
                                <div class="status-right">
                                    <div class="reading-time" id="readingTime">
                                        <i class="fas fa-clock"></i>
                                        <span>~2 phút đọc</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </main>
            </div>
        </div>
    </div>

    <!-- Image Upload Modal -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4><i class="fas fa-image"></i> Thêm hình ảnh</h4>
                <span class="close" onclick="closeImageModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3>Kéo thả hoặc click để chọn ảnh</h3>
                        <p>Hỗ trợ: JPG, PNG, GIF (tối đa 5MB)</p>
                        <input type="file" id="imageInput" accept="image/*" style="display: none;">
                        <button class="btn btn-primary" onclick="document.getElementById('imageInput').click()">
                            <i class="fas fa-folder-open"></i> Chọn ảnh
                        </button>
                    </div>
                </div>
                <div class="image-preview" id="imagePreview" style="display: none;">
                    <img id="previewImg" src="" alt="Preview">
                    <div class="image-info">
                        <input type="text" id="imageAlt" class="form-input" placeholder="Mô tả ảnh (Alt text)...">
                        <input type="text" id="imageCaption" class="form-input" placeholder="Chú thích ảnh...">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeImageModal()">Hủy</button>
                <button class="btn btn-primary" onclick="insertSelectedImage()">
                    <i class="fas fa-plus"></i> Thêm ảnh
                </button>
            </div>
        </div>
    </div>

    <!-- Link Modal -->
    <div id="linkModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h4><i class="fas fa-link"></i> Thêm liên kết</h4>
                <span class="close" onclick="closeLinkModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="linkText">Văn bản hiển thị</label>
                    <input type="text" id="linkText" class="form-input" placeholder="Nhập văn bản hiển thị...">
                </div>
                <div class="form-group">
                    <label for="linkUrl">URL</label>
                    <input type="url" id="linkUrl" class="form-input" placeholder="https://example.com">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="linkNewTab"> Mở trong tab mới
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeLinkModal()">Hủy</button>
                <button class="btn btn-primary" onclick="insertSelectedLink()">
                    <i class="fas fa-plus"></i> Thêm liên kết
                </button>
            </div>
        </div>
    </div>

    <script src="js/doctor-common.js"></script>
    <script src="js/script.js"></script>
    <script src="js/blog.js"></script>
</body>
</html>