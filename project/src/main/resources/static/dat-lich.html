<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đặt lịch khám - FertilityEHR</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dat-lich.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .form-input[readonly] {
    background-color: #f8f9fa;
    cursor: not-allowed;
    color: #495057;
}
        .booking-hero {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 100px 0 60px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .booking-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg width="20" height="20" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" fill="rgba(255,255,255,0.1)"/></svg>');
            opacity: 0.1;
        }

        .booking-container {
            position: relative;
            z-index: 1;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 var(--spacing-md);
        }

        .booking-hero h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
        }

        .booking-hero p {
            font-size: clamp(1rem, 2vw, 1.2rem);
            opacity: 0.9;
        }

        .booking-main {
            padding: var(--spacing-xl) 0;
            background: var(--light-background);
        }

        .booking-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--spacing-xl);
            max-width: 1200px;
            margin: 0 auto;
        }

        .booking-form-container {
            background: white;
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-strong);
            overflow: hidden;
        }

        .form-header {
            background: var(--gradient-primary);
            color: white;
            padding: var(--spacing-lg);
            text-align: center;
        }

        .form-header h2 {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-sm);
            font-weight: 700;
        }

        .form-header p {
            opacity: 0.9;
            font-size: 1rem;
        }

        .booking-form {
            padding: var(--spacing-lg);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
        }

        .form-group-full {
            grid-column: 1 / -1;
        }

        .form-group {
            margin-bottom: var(--spacing-md);
        }

        .form-group label {
            display: block;
            margin-bottom: var(--spacing-sm);
            color: var(--text-color);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .form-group label .required {
            color: #e74c3c;
            margin-left: 4px;
        }

        .input-wrapper {
            position: relative;
        }

        .input-wrapper i {
            position: absolute;
            left: var(--spacing-sm);
            top: 50%;
            transform: translateY(-50%);
            color: var(--light-text);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-sm) var(--spacing-sm) calc(var(--spacing-sm) * 2 + 1rem);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            font-size: 0.9rem;
            transition: all 0.3s ease;
            background: var(--light-background);
        }

        .form-input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            outline: none;
            background: white;
        }

        .form-input:focus+i {
            color: var(--primary-color);
        }

        .form-select {
            width: 100%;
            padding: var(--spacing-sm);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            font-size: 0.9rem;
            background: var(--light-background);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            outline: none;
            background: white;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--spacing-sm);
            margin-top: var(--spacing-sm);
        }

        .time-slot {
            padding: var(--spacing-sm);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-weight: 500;
            font-size: 0.85rem;
        }

        .time-slot:hover {
            border-color: var(--primary-color);
            background: rgba(74, 144, 226, 0.05);
        }

        .time-slot.selected {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .time-slot.disabled {
            background: #f8f9fa;
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .form-textarea {
            width: 100%;
            padding: var(--spacing-sm);
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius-md);
            font-size: 0.9rem;
            resize: vertical;
            min-height: 80px;
            background: var(--light-background);
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .form-textarea:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1);
            outline: none;
            background: white;
        }

        .submit-btn {
            width: 100%;
            padding: var(--spacing-md);
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--border-radius-md);
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .submit-btn i {
            transition: transform 0.3s ease;
        }

        .submit-btn:hover i {
            transform: translateX(5px);
        }

        .booking-info {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-lg);
        }

        .info-section {
            background: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-md);
        }

        .info-section h3 {
            color: var(--primary-color);
            font-size: 1.2rem;
            margin-bottom: var(--spacing-md);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .info-section h3 i {
            font-size: 1.3rem;
        }

        .info-section ul {
            list-style: none;
            padding: 0;
        }

        .info-section ul li {
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-color);
            font-size: 0.9rem;
        }

        .info-section ul li:last-child {
            border-bottom: none;
        }

        .info-section ul li::before {
            content: "✓";
            color: var(--primary-color);
            font-weight: bold;
            margin-right: var(--spacing-sm);
        }

        .contact-info {
            background: var(--gradient-primary);
            color: white;
            padding: var(--spacing-lg);
            border-radius: var(--border-radius-lg);
            text-align: center;
        }

        .contact-info h3 {
            margin-bottom: var(--spacing-md);
            font-size: 1.2rem;
        }

        .contact-info p {
            margin-bottom: var(--spacing-sm);
            opacity: 0.9;
        }

        .contact-info .phone {
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: var(--spacing-md);
        }

        @media (max-width: 1024px) {
            .booking-layout {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }
        }

        @media (max-width: 768px) {
            .booking-hero {
                padding: 80px 0 40px;
            }

            .form-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-sm);
            }

            .booking-form {
                padding: var(--spacing-md);
            }

            .time-slots {
                grid-template-columns: repeat(2, 1fr);
            }

            .submit-btn {
                font-size: 1rem;
                padding: var(--spacing-sm);
            }
        }

        .calendar-input {
            position: relative;
        }

        .calendar-input input[type="date"] {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }

        .calendar-input input[type="date"]::-webkit-calendar-picker-indicator {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>') no-repeat;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <!DOCTYPE html>
    <html lang="vi">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>FertilityEHR bởi Meditab</title>
        <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    </head>

    <body>
        <header>
            <div class="container">
                <div class="logo">
                    <a href="index.html"><img src="img/logo.png" alt="Logo Meditab"></a>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html#doctor">Đội ngũ bác sĩ</a></li>
                        <li class="dropdown">
                            <a href="#">Chuyên khoa <i class="fas fa-caret-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="kham-hiem-muon.html">Khám hiếm muộn/ tiền hôn nhân</a></li>
                                <li><a href="phuong-phap-sinh-san.html">Các phương pháp hỗ trợ sinh sản</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Blog</a></li>
                        <li><a href="#footer">Liên hệ</a></li>
                        <li><a href="dat-lich.html" class="active">Đặt lịch khám</a></li>
                        <li>
                            <div class="notification-wrapper" style="position: relative; display: none">
                                <button class="notification-icon" id="notificationBtn">
                                    <i class="fas fa-bell"></i>
                                    <span class="notification-badge">9</span>
                                </button>

                                <!-- Dropdown Notification -->
                                <div class="notification-dropdown" id="notificationDropdown">
                                    <div class="notification-dropdown-header">
                                        <h3>Thông báo</h3>
                                        <button class="notification-settings-btn">
                                            <i class="fas fa-cog"></i>
                                        </button>
                                    </div>

                                    <div class="notification-dropdown-body">
                                        <div class="notification-dropdown-item unread">
                                            <div class="notification-avatar">
                                                <i class="fas fa-syringe"></i>
                                            </div>
                                            <div class="notification-content">
                                                <div class="notification-title">Nhắc nhở tiêm thuốc</div>
                                                <div class="notification-description">Đã đến giờ tiêm thuốc Gonal-F 150
                                                    IU
                                                </div>
                                                <div class="notification-time">5 phút trước</div>
                                            </div>
                                        </div>

                                        <div class="notification-dropdown-item unread">
                                            <div class="notification-avatar">
                                                <i class="fas fa-flask"></i>
                                            </div>
                                            <div class="notification-content">
                                                <div class="notification-title">Lịch xét nghiệm</div>
                                                <div class="notification-description">Xét nghiệm máu E2 vào ngày mai lúc
                                                    8:00</div>
                                                <div class="notification-time">2 giờ trước</div>
                                            </div>
                                        </div>

                                        <div class="notification-dropdown-item">
                                            <div class="notification-avatar">
                                                <i class="fas fa-calendar-check"></i>
                                            </div>
                                            <div class="notification-content">
                                                <div class="notification-title">Lịch hẹn khám</div>
                                                <div class="notification-description">Khám siêu âm kiểm tra vào 28/06
                                                    lúc
                                                    14:00</div>
                                                <div class="notification-time">1 ngày trước</div>
                                            </div>
                                        </div>

                                        <div class="notification-dropdown-item">
                                            <div class="notification-avatar">
                                                <i class="fas fa-chart-line"></i>
                                            </div>
                                            <div class="notification-content">
                                                <div class="notification-title">Kết quả xét nghiệm</div>
                                                <div class="notification-description">Kết quả xét nghiệm hormone đã có
                                                </div>
                                                <div class="notification-time">2 ngày trước</div>
                                            </div>
                                        </div>

                                        <div class="notification-dropdown-item">
                                            <div class="notification-avatar">
                                                <i class="fas fa-user-md"></i>
                                            </div>
                                            <div class="notification-content">
                                                <div class="notification-title">Tin nhắn từ bác sĩ</div>
                                                <div class="notification-description">BS. Nguyễn Thị Hương đã gửi tin
                                                    nhắn
                                                    cho bạn</div>
                                                <div class="notification-time">3 ngày trước</div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="notification-dropdown-footer">
                                        <a href="#" class="view-all-notifications">Xem tất cả thông báo</a>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </nav>
                <div class="auth-buttons">
                    <button class="btn-login" onclick="openAuthModal('login')">Đăng nhập</button>
                    <button class="btn-register" onclick="openAuthModal('register')">Đăng ký</button>
                </div>
                <div class="user-menu" style="display:none;">
                    <h4>Welcome</h4><span style="font-weight: bold; color:#4A90E2" class="user-name"></span>
                    <button class="user-sidebar-btn" id="openSidebar" aria-label="Mở menu cá nhân">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                <button class="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>

        <!-- Sidebar giống trang index -->
    <aside class="sidebar" id="sidebar" style="display:none;">
        <button class="close-sidebar" id="closeSidebar" aria-label="Đóng menu">&times;</button>
        <div class="sidebar-user">
            <i class="fas fa-user-circle"></i>
            <span class="sidebar-username"></span>
        </div>
        <a href="dashboard.html"><i class="fas fa-user"></i> Bệnh án</a>
        <a href="ket-qua-xet-nghiem.html"><i class="fas fa-vials"></i> Kết quả xét nghiệm</a>
    <a href="lich-dieu-tri.html"><i class="fas fa-calendar-alt"></i> Lịch điều trị</a>
    <a href="#"><i class="fas fa-calendar-check"></i> Lịch hẹn</a>
    <a href="index.html#blog"><i class="fas fa-book-open"></i> Blog</a>
    <a href="ho-so-ca-nhan.html"><i class="fas fa-cog"></i> Cài đặt</a>
    <a href="#"><i class="fas fa-headset"></i> Hỗ trợ & liên hệ</a>
        <a href="#" class="sidebar-logout"><i class="fas fa-sign-out-alt"></i> Đăng xuất</a>
    </aside>

        <!-- Auth Modal -->
        <div class="auth-modal" id="authModal">
            <div class="auth-modal-content">
                <div class="auth-modal-left">
                    <div class="auth-modal-image">
                        <img src="img/hero-image.png" alt="Medical">
                    </div>
                    <div class="auth-modal-overlay">
                        <h2>Chào mừng bạn đến với FertilityEHR</h2>
                        <p>Hệ thống hỗ trợ theo dõi cho phòng khám hiếm muộn</p>
                    </div>
                </div>
                <div class="auth-modal-right">
                    <span class="close-modal">&times;</span>
                    <div class="auth-tabs">
                        <button class="auth-tab active" data-tab="login">Đăng nhập</button>
                        <button class="auth-tab" data-tab="register">Đăng ký</button>
                    </div>
                    <form id="loginForm" class="auth-form active">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <div class="input-group">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="loginEmail" required placeholder="Nhập email của bạn">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Mật khẩu</label>
                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="loginPassword" required placeholder="Nhập mật khẩu">
                                <i class="fas fa-eye toggle-password"></i>
                            </div>
                        </div>
                        <div class="form-group remember-forgot">
                            <label class="checkbox-container">
                                <input type="checkbox" id="rememberMe">
                                <span class="checkmark"></span>
                                Ghi nhớ đăng nhập
                            </label>
                            <a href="#" class="forgot-password">Quên mật khẩu?</a>
                        </div>
                        <button type="submit" class="btn-primary">
                            <span>Đăng nhập</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <div class="social-login">
                            <p>Hoặc đăng nhập với</p>
                            <div class="social-buttons">
                                <button type="button" class="social-btn google">
                                    <i class="fab fa-google"></i>
                                </button>
                                <button type="button" class="social-btn facebook">
                                    <i class="fab fa-facebook-f"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                    <form id="registerForm" class="auth-form">
                        <div class="form-group">
                            <label for="registerName">Họ và tên</label>
                            <div class="input-group">
                                <i class="fas fa-user"></i>
                                <input type="text" id="registerName" required placeholder="Nhập họ tên của bạn">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">Email</label>
                            <div class="input-group">
                                <i class="fas fa-envelope"></i>
                                <input type="email" id="registerEmail" required placeholder="Nhập email của bạn">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">Mật khẩu</label>
                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="registerPassword" required placeholder="Tạo mật khẩu">
                                <i class="fas fa-eye toggle-password"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Xác nhận mật khẩu</label>
                            <div class="input-group">
                                <i class="fas fa-lock"></i>
                                <input type="password" id="confirmPassword" required placeholder="Xác nhận mật khẩu">
                                <i class="fas fa-eye toggle-password"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-container">
                                <input type="checkbox" id="agreeTerms">
                                <span class="checkmark"></span>
                                Tôi đồng ý với <a href="#">điều khoản sử dụng</a>
                            </label>
                        </div>
                        <button type="submit" class="btn-primary">
                            <span>Đăng ký</span>
                            <i class="fas fa-arrow-right"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <section class="booking-hero">
            <div class="booking-container">
                <h1>Đặt lịch khám</h1>
                <p>Đặt lịch hẹn với các chuyên gia hàng đầu trong lĩnh vực hiếm muộn</p>
            </div>
        </section>

        <section class="booking-main">
            <div class="container">
                <div class="booking-layout">
                    <!-- Form đặt lịch bên trái -->
                    <div class="booking-form-container">
                        <div class="form-header">
                            <h2>Thông tin đặt lịch</h2>
                            <p>Vui lòng điền đầy đủ thông tin</p>
                        </div>
                        <form class="booking-form" id="bookingForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="fullName">Họ và tên <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <input type="text" id="fullName" class="form-input logged-in-name" required
                                            placeholder="Nhập họ tên">
                                        <!-- Thêm readonly để không cho sửa khi đã đăng nhập -->
                                        <!-- <input type="text" id="fullName" class="form-input" required placeholder="Nhập họ tên">
                                        <i class="fas fa-user"></i> -->
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="phone">Số điện thoại <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <input type="tel" id="phone" class="form-input" required placeholder="Nhập SĐT">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="email">Email <span class="required">*</span></label>
                                    <div class="input-wrapper">
                                        <input type="email" id="email" class="form-input" required placeholder="Nhập email">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="dob">Ngày sinh <span class="required">*</span></label>
                                    <div class="input-wrapper calendar-input">
                                        <input type="date" id="dob" class="form-input" required placeholder="Chọn ngày sinh">
                                        <i class="fas fa-calendar-alt"></i>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="doctor">Bác sĩ <span class="required">*</span></label>
                                    <select id="doctor" class="form-select" required>
                                        <option value="">Chọn bác sĩ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="appointmentDate">Ngày khám <span class="required">*</span></label>
                                    <div class="input-wrapper calendar-input">
                                        <input type="date" id="appointmentDate" class="form-input" required>
                                        <i class="fas fa-calendar-alt"></i>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group form-group-full">
                                <label for="service">Loại dịch vụ <span class="required">*</span></label>
                                <select id="service" class="form-select" required>
                                    <option value="">Chọn dịch vụ</option>
                                    <option value="consultation">Tư vấn ban đầu</option>
                                    <option value="follow-up">Tái khám</option>
                                    <option value="ivf">Thụ tinh trong ống nghiệm (IVF)</option>
                                    <option value="iui">Thụ tinh nhân tạo (IUI)</option>
                                    <option value="fertility-test">Xét nghiệm sinh sản</option>
                                    <option value="ultrasound">Siêu âm theo dõi</option>
                                </select>
                            </div>
                            <div class="form-group form-group-full">
                                <label for="timeSlot">Khung giờ <span class="required">*</span></label>
                                <div class="time-slots">
                                    <div class="time-slot" data-time="08:00-09:00">08:00-09:00</div>
                                    <div class="time-slot" data-time="09:00-10:00">09:00-10:00</div>
                                    <div class="time-slot" data-time="10:00-11:00">10:00-11:00</div>
                                    <div class="time-slot" data-time="11:00-12:00">11:00-12:00</div>
                                    <div class="time-slot" data-time="14:00-15:00">14:00-15:00</div>
                                    <div class="time-slot" data-time="15:00-16:00">15:00-16:00</div>
                                    <div class="time-slot" data-time="16:00-17:00">16:00-17:00</div>
                                    <div class="time-slot disabled" data-time="17:00-18:00">17:00-18:00</div>
                                </div>
                                <input type="hidden" id="selectedTime" name="selectedTime" required>
                            </div>
                            <div class="form-group form-group-full">
                                <label for="symptoms">Triệu chứng/Ghi chú</label>
                                <textarea id="symptoms" class="form-textarea"
                                          placeholder="Mô tả triệu chứng hoặc ghi chú..."></textarea>
                            </div>
                            <button type="submit" class="submit-btn">
                                <span>Đặt lịch ngay</span>
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </form>
                    </div>
                    <!-- Social sidebar + booking-info giữ nguyên -->
                    <div class="social-sidebar">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fas fa-envelope"></i></a>
                    </div>
                    <div class="booking-info">
                        <div class="info-section">
                            <h3><i class="fas fa-clock"></i> Giờ làm việc</h3>
                            <ul>
                                <li>Thứ 2 - Thứ 6: 8:00 - 17:00</li>
                                <li>Thứ 7: 8:00 - 12:00</li>
                                <li>Chủ nhật: 8:00 - 12:00</li>
                            </ul>
                        </div>

                        <div class="info-section">
                            <h3><i class="fas fa-user-md"></i> Dịch vụ</h3>
                            <ul>
                                <li>Tư vấn hiếm muộn</li>
                                <li>Thụ tinh IVF/IUI</li>
                                <li>Xét nghiệm sinh sản</li>
                                <li>Siêu âm chuyên khoa</li>
                                <li>Điều trị nội tiết</li>
                            </ul>
                        </div>

                        <div class="info-section">
                            <h3><i class="fas fa-shield-alt"></i> Cam kết</h3>
                            <ul>
                                <li>Bảo mật thông tin 100%</li>
                                <li>Đội ngũ bác sĩ chuyên nghiệp</li>
                                <li>Thiết bị hiện đại</li>
                                <li>Hỗ trợ 24/7</li>
                            </ul>
                        </div>

                        <div class="contact-info">
                            <h3><i class="fas fa-phone"></i> Liên hệ khẩn cấp</h3>
                            <p>Hotline: <span class="phone">1900 1234</span></p>
                            <p>Email: datlich@fertilityehr.com</p>
                            <p>Địa chỉ: 123 Đường Y Học, Hà Nội</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer id="footer">
            <div class="container">
                <div class="footer-columns">
                    <div class="footer-column">
                        <h3>Sản phẩm</h3>
                        <ul>
                            <li><a href="#">FertilityEHR</a></li>
                            <li><a href="#">IMS</a></li>
                            <li><a href="#">Cổng thông tin bệnh nhân</a></li>
                            <li><a href="#">Khám từ xa</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Chuyên khoa</h3>
                        <ul>
                            <li><a href="kham-hiem-muon.html">Hiếm muộn/Tiền hôn nhân</a></li>
                            <li><a href="phuong-phap-sinh-san.html">Phương pháp IVF</a></li>
                            <li><a href="phuong-phap-sinh-san.html">Phương pháp IUI</a></li>
                        </ul>
                    </div>
                    <div class="footer-column">
                        <h3>Thời gian hoạt động</h3>
                        <p>Thứ 2 - Thứ 6: 8:00 - 17:00</p>
                        <p>Thứ 7 - Chủ nhật: 8:00 - 12:00</p>
                    </div>
                    <div class="footer-column">
                        <h3>Liên hệ</h3>
                        <p>123 Đường Lê Văn Việt<br>Tầng 5<br>Hồ Chí Minh, Việt Nam</p>
                        <p>Điện thoại: (028) 5555-1234</p>
                        <p>Email: info@meditab.com</p>
                    </div>
                </div>
                <!-- <div class="footer-bottom">
                <p>&copy; 2023 Meditab Software Inc. Bản quyền đã được bảo hộ.</p>
                <div class="social-icons">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                </div> -->
            </div>
            </div>
        </footer>

        <script>
            // ================================
            // Khai báo giờ làm việc theo ngày
            // ================================
            const workingHours = {
                1: ['08:00', '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'], // Mon
                2: ['08:00', '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'], // Tue
                3: ['08:00', '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'], // Wed
                4: ['08:00', '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'], // Thu
                5: ['08:00', '09:00', '10:00', '11:00', '14:00', '15:00', '16:00'], // Fri
                6: ['08:00', '09:00', '10:00', '11:00'], // Sat
                0: ['08:00', '09:00', '10:00', '11:00']  // Sun
            };

            // ================================
            // Hàm cập nhật khung giờ theo ngày
            // ================================
            function updateTimeSlots(selectedDate) {
                const timeSlotsContainer = document.querySelector('.time-slots');
                const date = new Date(selectedDate);
                const dayOfWeek = date.getDay();

                // Xóa slot cũ
                timeSlotsContainer.innerHTML = '';

                // Lấy giờ làm việc của ngày
                const availableHours = workingHours[dayOfWeek] || [];

                if (availableHours.length === 0) {
                    timeSlotsContainer.innerHTML = '<p style="grid-column: 1/-1; text-align: center; color: #6c757d; padding: 20px;">Ngày này phòng khám không làm việc</p>';
                    return;
                }

                // Tạo các slot giờ
                availableHours.forEach(hour => {
                    const endHour = parseInt(hour.split(':')[0]) + 1;
                    const endTime = endHour.toString().padStart(2, '0') + ':00';

                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.setAttribute('data-time', `${hour}-${endTime}`);
                    timeSlot.textContent = `${hour}-${endTime}`;

                    // Sự kiện click chọn khung giờ
                    timeSlot.addEventListener('click', function () {
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        this.classList.add('selected');
                        document.getElementById('selectedTime').value = this.dataset.time;
                    });

                    timeSlotsContainer.appendChild(timeSlot);
                });

                // Reset selectedTime
                document.getElementById('selectedTime').value = '';
            }

            // ================================
            // Hàm lấy tên ngày trong tuần (vi)
            // ================================
            function getDayName(dayOfWeek) {
                const days = ['Chủ nhật', 'Thứ 2', 'Thứ 3', 'Thứ 4', 'Thứ 5', 'Thứ 6', 'Thứ 7'];
                return days[dayOfWeek];
            }

            // ========== Thiết lập min/max ngày =============
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('appointmentDate').setAttribute('min', today);
            document.getElementById('dob').setAttribute('max', today);

            // ========== Khởi tạo mặc định =============
            document.addEventListener('DOMContentLoaded', function () {
                const appointmentDateInput = document.getElementById('appointmentDate');
                // Set default to today & update slot
                appointmentDateInput.value = today;
                updateTimeSlots(today);
            });

            // ========== Đổi ngày sẽ đổi khung giờ =============
            document.getElementById('appointmentDate').addEventListener('change', function () {
                const selectedDate = this.value;
                if (selectedDate) {
                    updateTimeSlots(selectedDate);

                    // Hiển thị thông tin giờ làm việc
                    const date = new Date(selectedDate);
                    const dayOfWeek = date.getDay();
                    const dayName = getDayName(dayOfWeek);

                    let workingInfo = '';
                    if (dayOfWeek >= 1 && dayOfWeek <= 5) { // Monday - Friday
                        workingInfo = `${dayName}: 8:00 - 17:00`;
                    } else if (dayOfWeek === 6) {
                        workingInfo = `${dayName}: 8:00 - 12:00`;
                    } else if (dayOfWeek === 0) {
                        workingInfo = `${dayName}: 8:00 - 12:00`;
                    }

                    // Tạo hoặc update info giờ làm
                    let workingHoursDisplay = document.querySelector('.working-hours-display');
                    if (!workingHoursDisplay) {
                        workingHoursDisplay = document.createElement('div');
                        workingHoursDisplay.className = 'working-hours-display';
                        workingHoursDisplay.style.cssText = `
                background: #e3f2fd;
                border: 1px solid #2196f3;
                border-radius: 8px;
                padding: 8px 12px;
                margin-top: 8px;
                font-size: 0.85rem;
                color: #1976d2;
                text-align: center;
            `;
                        document.querySelector('.time-slots').parentNode.appendChild(workingHoursDisplay);
                    }
                    workingHoursDisplay.textContent = `Giờ làm việc ${workingInfo}`;
                }
            });

            // ========== Lấy danh sách bác sĩ từ backend ============
            document.addEventListener('DOMContentLoaded', function() {
                fetch('/api/doctors')
                    .then(response => response.json())
                    .then(data => {
                        const doctorSelect = document.getElementById('doctor');
                        doctorSelect.innerHTML = '<option value="">Chọn bác sĩ</option>';
                        data.forEach(doctor => {
                            const option = document.createElement('option');
                            option.value = doctor.docId;
                            option.textContent = doctor.docFullName + (doctor.expertise ? ' - ' + doctor.expertise : '');
                            doctorSelect.appendChild(option);
                        });
                    })
                    .catch(error => {
                        console.error('Lỗi lấy danh sách bác sĩ:', error);
                    });
            });

            // ========== Bắt sự kiện click chọn khung giờ ===========
            document.addEventListener('DOMContentLoaded', function() {
                document.querySelectorAll('.time-slot').forEach(slot => {
                    slot.addEventListener('click', function () {
                        if(this.classList.contains('disabled')) return;
                        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                        this.classList.add('selected');
                        document.getElementById('selectedTime').value = this.dataset.time;
                    });
                });
            });

            // ========== Submit form đặt lịch ===========
            document.getElementById('bookingForm').addEventListener('submit', function (e) {
                e.preventDefault();
                if (!document.getElementById('selectedTime').value) {
                    alert('Vui lòng chọn khung giờ khám!');
                    return;
                }
                // Lấy và tách thời gian, loại bỏ giây và khoảng trắng nếu có
                const timeRange = document.getElementById('selectedTime').value.trim();
                let [startTime, endTime] = timeRange.split('-').map(t => t.trim());
                // Nếu thừa :00 thì cắt bỏ
                if (startTime.length === 8) startTime = startTime.slice(0,5);
                if (endTime.length === 8) endTime = endTime.slice(0,5);

                // Debug để kiểm tra giá trị gửi đi
                // console.log('startTime:', startTime, 'endTime:', endTime);

                const data = {
                    fullName: document.getElementById('fullName').value,
                    phone: document.getElementById('phone').value,
                    email: document.getElementById('email').value,
                    dob: document.getElementById('dob').value,
                    docId: parseInt(document.getElementById('doctor').value),
                    appointmentDate: document.getElementById('appointmentDate').value,
                    service: document.getElementById('service').value,
                    startTime: startTime,      // luôn là "HH:mm"
                    endTime: endTime,          // luôn là "HH:mm"
                    note: document.getElementById('symptoms').value
                };
                fetch('/api/booking', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                })
                    .then(res => res.json())
                    .then(resp => {
                        if (resp.success) {
                            alert('Đặt lịch thành công! Nếu bạn chưa có tài khoản, thông tin tài khoản sẽ được gửi về email.');
                            document.getElementById('bookingForm').reset();
                            // Reset lại time slot cho ngày hôm nay
                            const today = new Date().toISOString().split('T')[0];
                            document.getElementById('appointmentDate').value = today;
                            // Remove working hours display nếu có
                            const workingHoursDisplay = document.querySelector('.working-hours-display');
                            if (workingHoursDisplay) {
                                workingHoursDisplay.remove();
                            }
                            // Reset slot selection
                            document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('selected'));
                            document.getElementById('selectedTime').value = '';
                        } else {
                            alert('Đặt lịch thất bại: ' + (resp.message || 'Có lỗi xảy ra!'));
                        }
                    })
                    .catch(err => alert('Có lỗi xảy ra khi gửi dữ liệu!'));
            });

            // ========== Mobile menu toggle ===========
            document.querySelector('.mobile-menu-btn').addEventListener('click', function () {
                document.querySelector('nav').classList.toggle('active');
            });
        </script>
        <script src="js/auth-expiry.js"></script>
        <script src="js/script.js"></script>
    </body>
    </html>